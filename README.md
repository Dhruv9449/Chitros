# Chitros

Social media backend API built on FastAPI  
Try it here - https://chitros.herokuapp.com/docs

<br>

## Table of contents

- [Features](#features)
- [Tech stack](#tech-stack)
- [Requirements](#requirements)
- [Setting-up and Installation](#setting-up-and-installation)
  - [Cloning repository](#cloning-repository)
  - [Setting up a virtual environment](#setting-up-virtual-environment)
  - [Installing dependencies](#installing-dependencies)
  - [Configuring environment variables](#configuring-environment-variables)
  - [Migrating changes to the database](#migrating-changes-to-the-database)
  - [Running the server](#run-the-server)
- [Using the API](#using-the-api)
  - [Interactive documentation](#interactive-documentation)
  - [Thunder Client](#thunder-client)
- [License](#license)

<br>

## Features

Chitros has all the basic social media features such as -

- Creating, modifying and deleting user profiles
- Authentication using JWT access tokens
- Creating, modifying and deleting posts
- Following-Followers relationships
- Sending and receiving follow requests
- Likes, comments and replies
- Viewing feed sorted by likes and date of upload
- Pagination of feed

<br>

## Tech stack

**Web framework** - [FastAPI](https://fastapi.tiangolo.com/)  
**Database** - [PostgreSQL](https://www.postgresql.org/)  
**ORM** - [Sqlalchemy](https://www.sqlalchemy.org/)  
**Database migration tool** - [Alembic](https://alembic.sqlalchemy.org/)

<br>

## Requirements

[Python version 3.9](https://www.python.org/)  
[PostgreSQL version 14](https://www.postgresql.org/)

<br>
<br>

## Setting up and Installation

### Cloning Repository

Clone this repository by running in your terminal-

```sh
git clone git@github.com:Dhruv9449/Chitros.git
```

or

```sh
git clone https://github.com/Dhruv9449/Chitros.git
```

<br>
<br>

### Setting up Virtual Environment

Install `virtualenv` and set up a virtual environment in the working directory using the following commands -

```sh
pip install virtualenv
virtualenv venv
```

Now, activate the virtual environment -

#### Windows

```cmd
C:\Users\Username\Chitros> .\venv\Scripts\activate
```

#### Linux

```sh
user@hostname:~/Chitros$ source venv/bin/activate
```

Refer to the [official virtualenv documentation](https://virtualenv.pypa.io) for any further help.

<br>
<br>

### Installing dependencies

To install all the dependancies for this project run the following command in your terminal -

```sh
pip install -r requirements.txt
```

<br>
<br>

### Configuring Environment Variables

Configure your environment variables by creating a `.env` file as shown in `.env.example` in the `Chitros/app/` directory -

- `DATABASE_USERNAME` - PostgreSQL database username.
- `DATABASE_SERVER` - PostgreSQL database server name.
- `DATABASE_PASSWORD` - PostgreSQL database password.
- `DATABASE_HOSTNAME` - PostgreSQL database host name.
- `DATABASE_NAME` - PostgreSQL database name.
- `SECRET_KEY` - Secret SSH key encoding your JWTs.
- `ALGORITHM` - Algorithm for encoding JWTs.
- `ACCESS_TOKEN_EXPIRE_MINUTES` - The time after which a JWT should expire.

Use `.env.example` for reference.

<br>
<br>

### Migrating changes to the database

Before running the server we need to migrate the changes made to the database using alembic. Run the following command -

```sh
alembic upgrade head
```

This should create the necessary changes to the database.

<br>
<br>

### Run the server!

We can start the ASGI uvicorn server with the following commands -

```sh
uvicorn app.main:app
```

**Note:** You need to be in the `Chitros/` directory while running this command.

<br>
<br>

## Using the API

- Data is received in the form of **Form Fields** for creation and updation.
- Responses are in form of **JSON**.

<br>

### Interactive documentation

You can try out the API using the interactive docs that are generated by Swagger UI. These can be accessed using the URL - `http://127.0.0.1:8000/docs` or `http://localhost/docs`

**Note**- You can also try out the API in the existing deployment at `https://chitron.herokuapp.com`.

<br>
<br>

### Thunder Client

If you are using VS code then you can also try out the API using the [Thunder Client extension](https://www.thunderclient.com/).

- Install the extension and then you can import the **thunderclient environment** from `Chitros/thunderclient/thunder-environment_Chitros.json`.
- After this you can import the **thunderclient requests collection** from `Chitros/thunderclient/thunder-collection_Chitros.json`.

<br>
<br>

## License

Copyright © 2022 Dhruv9449  
[MIT License](LICENSE)

<br>
<br>
<p align="center">
Developed with ❤️ by <a href="https://github.com/Dhruv9449" target=_blank>Dhruv Shah</a>
</p>
</p>
